"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1753],{2052:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var s=t(5893),a=t(1151);const r={id:"angular-ivy",title:"Angular Ivy"},o=void 0,l={id:"guides/angular-ivy",title:"Angular Ivy",description:"Starting from v9.0.0+, jest-preset-angular is fully compatible with Angular Ivy. To make sure that Jest uses the",source:"@site/versioned_docs/version-13.0/guides/angular-ivy.md",sourceDirName:"guides",slug:"/guides/angular-ivy",permalink:"/jest-preset-angular/docs/guides/angular-ivy",draft:!1,unlisted:!1,editUrl:"https://github.com/thymikee/jest-preset-angular/edit/main/website/versioned_docs/version-13.0/guides/angular-ivy.md",tags:[],version:"13.0",lastUpdatedBy:"Anh Pham",lastUpdatedAt:1706774769,formattedLastUpdatedAt:"Feb 1, 2024",frontMatter:{id:"angular-ivy",title:"Angular Ivy"},sidebar:"docs",previous:{title:"Test environment",permalink:"/jest-preset-angular/docs/getting-started/test-environment"},next:{title:"Angular >=13",permalink:"/jest-preset-angular/docs/guides/angular-13+"}},i={},c=[{value:"Control ngcc processing",id:"control-ngcc-processing",level:2}];function g(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:["import Tabs from '@theme/Tabs';","\n","import TabItem from '@theme/TabItem';","\n","\n",(0,s.jsxs)(n.p,{children:["Starting from ",(0,s.jsx)(n.strong,{children:"v9.0.0+"}),", ",(0,s.jsx)(n.code,{children:"jest-preset-angular"})," is fully compatible with Angular Ivy. To make sure that Jest uses the\nAngular Ivy, you must run ",(0,s.jsx)(n.code,{children:"ngcc"})," before running tests. ",(0,s.jsx)(n.code,{children:"ngcc"})," will transform all Angular-format packages to be compatible\nwith Ivy compiler."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"jest-preset-angular"})," also provides a Jest global setup file to help you to run ",(0,s.jsx)(n.code,{children:"ngcc"})," with Jest. Add to the following section:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["to your root ",(0,s.jsx)(n.code,{children:"jest.config.js"})]}),"\n"]}),"\n",'<Tabs groupId="code-examples">',"\n",'<TabItem value="js" label="JavaScript">',"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:"tab",children:"module.exports = {\n  //...\n  globalSetup: 'jest-preset-angular/global-setup',\n};\n"})}),"\n","</TabItem>","\n",'<TabItem value="ts" label="TypeScript">',"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:"tab",children:"import type { Config } from 'jest';\n\nconst jestConfig: Config = {\n  //...\n  globalSetup: 'jest-preset-angular/global-setup',\n};\n\nexport default jestConfig;\n"})}),"\n","</TabItem>","\n",'<TabItem value="JSON">',"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JSON",metastring:"tab",children:'{\n  "jest": {\n    "globalSetup": "jest-preset-angular/global-setup"\n  }\n}\n'})}),"\n","</TabItem>","\n","</Tabs>","\n",(0,s.jsx)(n.h2,{id:"control-ngcc-processing",children:"Control ngcc processing"}),"\n",(0,s.jsxs)(n.p,{children:["Since ",(0,s.jsx)(n.strong,{children:"v12.0.0"}),", ",(0,s.jsx)(n.code,{children:"jest-preset-angular"})," provide a possibility to skip ",(0,s.jsx)(n.code,{children:"ngcc"})," via ",(0,s.jsx)(n.code,{children:"globalThis"})," by doing the following"]}),"\n",'<Tabs groupId="code-examples">',"\n",'<TabItem value="js" label="JavaScript">',"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:"tab",children:"globalThis.ngJest = {\n  skipNgcc: true,\n  tsconfig: 'tsconfig.spec.json', // this is the project root tsconfig\n};\n\nmodule.exports = {\n  //...\n  globalSetup: 'jest-preset-angular/global-setup',\n};\n"})}),"\n","</TabItem>","\n",'<TabItem value="ts" label="TypeScript">',"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:"tab",children:"import type { Config } from 'jest';\n\nglobalThis.ngJest = {\n  skipNgcc: true,\n  tsconfig: 'tsconfig.spec.json', // this is the project root tsconfig\n};\n\nconst jestConfig: Config = {\n  //...\n  globalSetup: 'jest-preset-angular/global-setup',\n};\n\nexport default jestConfig;\n"})}),"\n","</TabItem>","\n","</Tabs>"]})}function u(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(g,{...e})}):g(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>o});var s=t(7294);const a={},r=s.createContext(a);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);